openapi: 3.0.0
info:
  title: API
  version: '1.0'
  contact:
    name: Johann Gnaucke
    url: gitlab.gnaucke.dev/avance/avance-app
    email: contact@gnaucke.com
servers:
  - url: 'http://localhost:8000'
paths:
  /api/v1/health:
    get:
      summary: Instance Health
      tags: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Version:
                    type: string
                  DB:
                    type: boolean
                  Redis:
                    type: boolean
                  Errors:
                    type: array
                    items:
                      type: string
              examples: {}
        '': {}
      operationId: get-api-v1-health
      description: Returns the current health of the instance
      parameters: []
      security:
        - Session Key: []
      requestBody: {}
  /api/v1/login:
    post:
      summary: Logging In
      operationId: post-api-v1-login
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  SessionKey:
                    type: string
                    description: ''
        '401':
          description: |-
            Unauthorized
            Username and Password don't match
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Username:
                  type: string
                Password:
                  type: string
        description: ''
      tags:
        - Session Management
  /api/v1/session:
    get:
      summary: Check Session
      tags:
        - Session Management
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Authorized:
                    type: boolean
      operationId: get-api-v1-session
      description: Use this endpoint to check wheter your session key is valid or not.
      security:
        - Session Key: []
  /api/v1/logout:
    get:
      summary: Logging Out
      tags:
        - Session Management
      responses:
        '200':
          description: OK
          headers: {}
          content:
            application/json:
              schema:
                type: object
                properties:
                  Result:
                    type: string
                    description: 'This is always "Session destroyed"'
        '404':
          description: |-
            Not Found
            Session Key already was invalid or expired
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-logout
      description: This invalidates your session key.
      security:
        - Session Key: []
  /api/v1/profile:
    get:
      summary: Profile / User Information
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
      operationId: get-api-v1-profile
      security:
        - Session Key: []
      tags:
        - Profile
    patch:
      summary: Update Profile
      operationId: patch-api-v1-profile
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Request changes nothing about the user
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Username:
                  type: string
                Firstname:
                  type: string
                Lastname:
                  type: string
                Mail:
                  type: string
                Password:
                  type: string
        description: ''
      tags:
        - Profile
  /api/v1/projects:
    get:
      summary: Get all projects
      tags:
        - Projects
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
      operationId: get-api-v1-projects
      security:
        - Session Key: []
      description: Returns all projects the user is able to see.
    post:
      summary: Create Projects
      operationId: post-api-v1-projects
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          description: 'JSON is malformed OR "Name" property is empty.'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '401':
          description: User is not allowed to create projects.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '409':
          description: Project with that name already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      description: Creates a project if the user is permitted to do so.
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Name:
                  type: string
                Description:
                  type: string
              required:
                - Name
                - Description
            examples:
              Example:
                value:
                  Name: My Project
                  Description: My amazing project
      tags:
        - Projects
  '/api/v1/project/{projectid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
    get:
      summary: Get information about a project
      tags:
        - Projects
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '401':
          description: User is not allowed to view project.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: Project was not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-project-projectid
      description: ''
      security:
        - Session Key: []
    patch:
      summary: Update Project
      operationId: patch-api-v1-project-projectid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to update project.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: Project was not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: The request changes nothing.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      description: ''
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Name:
                  type: string
                Description:
                  type: string
        description: Body CAN specify Name or Description. Body MUST specify one of those properties.
      tags:
        - Projects
  '/api/v1/project/{projectid}/queues':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
    get:
      summary: Get queues in a project
      tags:
        - Queues
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Queue'
        '403':
          description: "User doesn't have access to project"
      operationId: get-api-v1-project-projectid-queues
      security:
        - Session Key: []
    post:
      summary: Create Queue
      operationId: post-api-v1-project-projectid-queues
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Queue'
        '400':
          description: JSON is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to create queues
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: '"Name" property was empty.'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '409':
          description: Queue with that name already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      description: ''
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties: {}
      tags:
        - Queues
  '/api/v1/project{projectid}/queue/{queueid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
    patch:
      summary: Update Queue
      operationId: patch-api-v1-project-projectid-queue-queueid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Queue'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project / queue wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: "Request doesn't change anything"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Name:
                  type: string
              required:
                - Name
      tags:
        - Queues
    delete:
      summary: Delete Queues
      operationId: delete-api-v1-project-projectid-queue-queueid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Queue:
                    type: string
              examples:
                Example:
                  value:
                    Queue: Queue 1 deleted
        '403':
          description: User is not allowed to delete queues
        '404':
          description: "Specified project / queue wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      tags:
        - Queues
  '/api/v1/project/{projectid}/severities':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
    get:
      summary: Get Severities
      tags:
        - Severities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Severity'
        '400':
          description: "showDisabled Query Parameter isn't a boolean"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: "User doesn't have access to project"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-project-projectid-severities
      parameters:
        - schema:
            type: boolean
          in: query
          name: showDisabled
          description: Defines if disabled severties should be returned
      security:
        - Session Key: []
    post:
      summary: Create Severities
      operationId: post-api-v1-project-projectid-severities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Severity'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to create severities
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: '"Name" / "DisplayColor" property is empty'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '409':
          description: Severity with that name already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      tags:
        - Severities
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Enabled:
                  type: boolean
                Name:
                  type: string
                DisplayColor:
                  type: string
                Priority:
                  type: integer
  '/api/v1/project/{projectid}/statuses':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
    get:
      summary: Get Statuses
      tags:
        - Statuses
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Status'
        '400':
          description: "showDisabled Query Parameter isn't a boolean"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: "User doesn't have access to project"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-project-projectid-statuses
      parameters:
        - schema:
            type: boolean
          in: query
          name: showDisabled
          description: Defines if disabled statuses should be returned
      security:
        - Session Key: []
    post:
      summary: Create Statuses
      operationId: post-api-v1-project-projectid-statuses
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to create statuses
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: '"Name" / "DisplayColor" property is empty'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '409':
          description: Status with that name already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      tags:
        - Statuses
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Enabled:
                  type: boolean
                Name:
                  type: string
                DisplayColor:
                  type: string
                TicketsVisible:
                  type: boolean
  '/api/v1/project/{projectid}/severity/{severityid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: severityid
        in: path
        required: true
    patch:
      summary: Update Severities
      operationId: patch-api-v1-project-projectid-severity-severityid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Severity'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to update severity
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project / severity wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Request changes nothing.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      description: ''
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Enabled:
                  type: boolean
                Name:
                  type: string
                DisplayColor:
                  type: string
                Priority:
                  type: integer
      tags:
        - Severities
    delete:
      summary: Delete Severities
      operationId: delete-api-v1-project-projectid-severity-severityid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Severity:
                    type: string
              examples:
                Example:
                  value:
                    Severity: Severity 1 deleted
        '403':
          description: User is not allowed to delete severities
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project / severity wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      tags:
        - Severities
      security:
        - Session Key: []
  '/api/v1/project/{projectid}/status/{statusid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: statusid
        in: path
        required: true
    patch:
      summary: Update Statuses
      operationId: patch-api-v1-project-projectid-status-statusid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to update status
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project / status wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Request changes nothing.
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      description: ''
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Enabled:
                  type: boolean
                Name:
                  type: string
                DisplayColor:
                  type: string
                TicketsVisible:
                  type: boolean
      tags:
        - Statuses
    delete:
      summary: Delete Statuses
      operationId: delete-api-v1-project-projectid-status-statusid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Status:
                    type: string
              examples:
                Example:
                  value:
                    Status: Status 1 deleted
        '403':
          description: User is not allowed to delete statuses
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project / status wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      tags:
        - Statuses
      security:
        - Session Key: []
  '/api/v1/project/{projectid}/queue/{queueid}/tickets':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
    get:
      summary: Get Tickets in Queue
      tags:
        - Tickets
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Ticket'
        '400':
          description: showInvisible Query Parameter is not a boolean
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: "User doesn't have access to the queue / project"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified project / queue wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-project-projectid-queue-queueid-tickets
      security:
        - Session Key: []
      parameters:
        - schema:
            type: boolean
          in: query
          name: showInvisible
          description: If set to true tickets with invisible statuses will also be shown
    post:
      summary: Create Tickets
      operationId: post-api-v1-project-projectid-queue-queueid-tickets
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to create tickets in that queue
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: Specified project / queue / owner / status / severities not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Specified Title / Status / Severity was empty
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      tags:
        - Tickets
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Title:
                  type: string
                Description:
                  type: string
                Owner:
                  type: string
                  description: Username
                Severity:
                  type: string
                Status:
                  type: string
                StalledUntil:
                  type: string
              required:
                - Title
                - Severity
                - Status
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    get:
      summary: Get Ticket
      tags:
        - Tickets
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
        '403':
          description: "User doesn't have access to the queue, which the ticket is currently in."
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified ticket wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-ticket-ticketid
      security:
        - Session Key: []
    patch:
      summary: Update Ticket
      operationId: patch-api-v1-project-projectid-queue-queueid-ticket-ticketid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to patch tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified Project / Queue / Ticket / Owner / Status / Severity wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: "Nothing Changed / StalledUntil variable wasn't a datetime"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Title:
                  type: string
                Description:
                  type: string
                Owner:
                  type: string
                  description: Username
                Severity:
                  type: string
                Status:
                  type: string
                StalledUntil:
                  type: string
      tags:
        - Tickets
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/owner':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    delete:
      summary: Remove Owner
      operationId: delete-api-v1-project-projectid-queue-queueid-ticket-ticketid-owner
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
        '403':
          description: User is not allowed to edit tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: Project / Queue / Ticket not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Request changes nothing about the ticket
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      tags:
        - Tickets
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/stalleduntil':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    delete:
      summary: Remove StalledUntil date
      operationId: delete-api-v1-project-projectid-queue-queueid-ticket-ticketid-owner
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
        '403':
          description: User is not allowed to edit tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: Project / Queue / Ticket not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Request changes nothing about the ticket
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      tags:
        - Tickets
  '/api/v1/ticket/{ticketid}':
    parameters:
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    get:
      summary: Get Ticket
      tags:
        - Tickets
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Ticket'
        '403':
          description: "User doesn't have access to the queue / project, which the ticket is currently in."
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified ticket wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-ticket-ticketid
      security:
        - Session Key: []
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/relations':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    post:
      summary: Add Relation
      operationId: post-api-v1-project-projectid-queue-queueid-ticket-ticketid-relations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Relation:
                    type: integer
                    description: Returns the relation ID
                required:
                  - Relation
        '400':
          description: |-
            JSON Body malformed.
            Maybe RelationType is not a number?
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to edit tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified Project / Queue / Ticket wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Relation already exists / Relation would result in loop
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      tags:
        - Tickets
      description: ''
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                OtherTicket:
                  type: integer
                RelationType:
                  type: integer
                  description: |-
                    RelationType can be one of the following numbers:
                    0: References
                    1: ReferencedBy
                    2: ParentOf
                    3: ChildOf
              required:
                - OtherTicket
                - RelationType
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/relation/{relationid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
      - schema:
          type: string
        name: relationid
        in: path
        required: true
    delete:
      summary: Delete Relation
      operationId: delete-api-v1-project-projectid-queue-queueid-ticket-ticketid-relation-relationid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Relation:
                    type: string
              examples:
                Example:
                  value:
                    Relation: Relation 1 deleted
        '403':
          description: User is not allowed to edit tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified Project / Queue / Ticket / Relation wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      tags:
        - Tickets
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/actions':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    post:
      summary: Add Actions (Comments / Answers)
      operationId: post-api-v1-project-projectid-queue-queueid-ticket-ticketid-actions
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Action:
                    type: integer
                    description: Returns the ID of the action
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to edit tickets in that queue
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified Project / Queue / Ticket wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: 'Content property is empty / Another type than 0 (Answer) or 1 (Comment) was specified '
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Type:
                  type: integer
                  description: |-
                    Type can be one of the following numbers:
                    0 = Answer
                    1 = Comment
                Content:
                  type: string
              required:
                - Type
                - Content
      description: ''
      tags:
        - Tickets
  '/api/v1/user/{userid}/avatar':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: Get Profile Picture of User
      tags:
        - Users
      responses:
        '200':
          description: OK (Returns the image)
      operationId: get-api-v1-user-userid-avatar
      security:
        - Session Key: []
  /api/v1/profile/avatar:
    get:
      summary: Delete Profile Picutre
      tags:
        - Users
      responses:
        '200':
          description: OK (Returns the image)
      operationId: get-api-v1-user-userid-avatar
      security:
        - Session Key: []
    post:
      summary: Update Profile Picture
      operationId: post-api-v1-profile-avatar
      responses:
        '200':
          description: OK
        '406':
          description: "'avatar' property not defined / invalid filetype"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                avatar:
                  type: object
            examples: {}
        description: "Image via FORM Upload ('avatar' as property)"
      description: 'Allowed filetypes: .png, .jpg, .jpeg, .gif'
    delete:
      summary: Delete Profile Picture
      operationId: delete-api-v1-profile-avatar
      responses:
        '200':
          description: OK
      description: Resets the current profile picture back to the placeholder.
      security:
        - Session Key: []
  '/api/v1/user/{userid}':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    delete:
      summary: ''
      operationId: delete-api-v1-user-userid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  TaskID:
                    type: number
        '403':
          description: "User doesn't have the privilege to delete users"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: Requested User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: "The last admin can't delete himself"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      tags:
        - Users
      security:
        - Session Key: []
  '/api/v1/user/{userid}/permissions':
    parameters:
      - schema:
          type: string
        name: userid
        in: path
        required: true
    get:
      summary: Get Permissions of user
      tags:
        - Users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Permissions'
        '403':
          description: 'User is not allowed to view this permission set. Look at description!'
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified user couldn't be found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      operationId: get-api-v1-user-userid-permissions
      description: |-
        Returns all permissions of the given user.
        Permissions needed: Admin / CanChangePermissionsGlobal
        Note: You can always view your own permissions
      parameters: []
      security:
        - Session Key: []
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/recipients':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
    post:
      summary: Create Recipient
      operationId: post-api-v1-project-projectid-queue-queueid-ticket-ticketid-recipients
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Recipients:
                    type: array
                    description: Returns all recipients created
                    items:
                      type: integer
        '400':
          description: JSON Body is malformed
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '403':
          description: User is not allowed to edit tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified Project/Queue/Ticket/User wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '406':
          description: Neither User or Mail property was specified OR a recipient constraint occured
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                Mail:
                  type: string
                User:
                  type: string
                  description: Username of the wanted recipient
                Type:
                  type: integer
                  description: |-
                    0 = Requestor
                    1 = Reader
                    2 = Admin
  '/api/v1/project/{projectid}/queue/{queueid}/ticket/{ticketid}/recipient/{recipientid}':
    parameters:
      - schema:
          type: string
        name: projectid
        in: path
        required: true
      - schema:
          type: string
        name: queueid
        in: path
        required: true
      - schema:
          type: string
        name: ticketid
        in: path
        required: true
      - schema:
          type: string
        name: recipientid
        in: path
        required: true
    get:
      summary: Your GET endpoint
      tags: []
      responses: {}
      operationId: get-api-v1-project-projectid-queue-queueid-ticket-ticketid-recipient-recipientid
    delete:
      summary: Delete Recipient
      operationId: delete-api-v1-project-projectid-queue-queueid-ticket-ticketid-recipient-recipientid
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Recipient:
                    type: string
        '403':
          description: User is not allowed to edit tickets
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
        '404':
          description: "Specified Project/Queue/Ticket/Recipient wasn't found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  Error:
                    type: string
      security:
        - Session Key: []
components:
  schemas:
    Project:
      title: Project
      properties:
        ID:
          type: integer
        Name:
          type: string
        Description:
          type: string
      type: object
    Queue:
      title: Queue
      properties:
        ID:
          type: integer
        Name:
          type: string
      type: object
    Severity:
      title: Severity
      properties:
        ID:
          type: integer
        Enabled:
          type: boolean
        Name:
          type: string
        DisplayColor:
          type: string
        Priority:
          type: integer
      type: object
    Status:
      title: Severity
      properties:
        ID:
          type: integer
        Enabled:
          type: boolean
        Name:
          type: string
        DisplayColor:
          type: string
        TicketsVisible:
          type: boolean
      type: object
    User:
      title: User
      properties:
        ID:
          type: integer
        Username:
          type: string
        Mail:
          type: string
        Firstname:
          type: string
        Lastname:
          type: string
      type: object
    Ticket:
      title: Ticket
      type: object
      Actions:
        title: Actions
        type: object
        properties:
          ID:
            type: integer
          Type:
            type: integer
            description: |-
              0 = Answer
              1 = Comment
              2 = Property Update
              3 = Unspecified
          Title:
            type: string
          Content:
            type: string
          IssuedAt:
            type: string
          IssuedBy:
            $ref: '#/components/schemas/Issuer'
      properties:
        ID:
          type: integer
        Title:
          type: string
        Description:
          type: string
        QueueID:
          type: integer
        Queue:
          $ref: '#/components/schemas/Queue'
        OwnerID:
          type: integer
        Owner:
          $ref: '#/components/schemas/User'
        SeverityID:
          type: integer
        Severity:
          $ref: '#/components/schemas/Severity'
        StatusID:
          type: integer
        Status:
          $ref: '#/components/schemas/Status'
        CreatedAt:
          type: string
        LastModified:
          type: string
        StalledUntil:
          type: object
          properties:
            Valid:
              type: boolean
            Time:
              type: string
        Meta:
          type: string
        Actions:
          type: array
          items:
            $ref: '#/components/schemas/Actions'
    Issuer:
      title: Issuer
      type: object
      properties:
        Valid:
          type: boolean
        Issuer:
          $ref: '#/components/schemas/User'
    Permissions:
      title: Permissions
      type: object
      properties:
        Admin:
          type: boolean
        CanCreateUsers:
          type: boolean
        CanModifyUsers:
          type: boolean
        CanDeleteUsers:
          type: boolean
        CanCreateGroups:
          type: boolean
        CanModifyGroups:
          type: boolean
        CanDeleteGroups:
          type: boolean
        CanChangePermissionsGlobal:
          type: boolean
        AccessTo:
          type: object
          properties:
            Projects:
              type: array
              items:
                type: object
                properties:
                  ProjectID:
                    type: integer
                  CanSee:
                    type: boolean
                  CanModify:
                    type: boolean
                  CanChangePermissions:
                    type: boolean
                  CanCreateQueues:
                    type: boolean
                  CanModifyQueues:
                    type: boolean
                  CanRemoveQueues:
                    type: boolean
                  CanCreateSeverities:
                    type: boolean
                  CanModifySeverities:
                    type: boolean
                  CanRemoveSeverities:
                    type: boolean
                  CanCreateStatuses:
                    type: boolean
                  CanModifyStatuses:
                    type: boolean
                  CanRemoveStatuses:
                    type: boolean
            Queues:
              type: array
              items:
                type: object
                properties:
                  QueueID:
                    type: integer
                  CanSee:
                    type: boolean
                  CanCreateTicket:
                    type: boolean
                  CanEditTicket:
                    type: boolean
                  CanModify:
                    type: boolean
                  CanChangePermissions:
                    type: boolean
    Actions:
      title: Actions
      type: object
      properties:
        ID:
          type: number
        Title:
          type: string
        Content:
          type: string
        Type:
          type: integer
          description: |-
            0 = Answer
            1 = Comment
            2 = Properites Changed
            3 = Unspecified
        IssuedAt:
          type: string
        IssuedBy:
          $ref: '#/components/schemas/Issuer'
  securitySchemes:
    Session Key:
      name: Authorization
      type: apiKey
      in: header
security:
  - Session Key: []
